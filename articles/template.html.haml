-# coding: UTF-8
-require 'yaml'
-config = YAML.load_file(File.expand_path('../articles/articles.yml', __FILE__))
-previous_folder = config.select{|key,value| value['next_article'] == folder}.first.last['folder']
-next_folder = config[folder]['next_article']
!!! 5
%html
  %head
    %link{rel:'stylesheet', href: '../css/article.css', type: 'text/css'}
    %link{rel:'stylesheet', href: '../css/card.css', type: 'text/css'}
    %link{rel:'stylesheet', href: '../css/normalize.css', type: 'text/css'}
    %link{rel: 'stylesheet', href:'//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css'}
    %script{src:'//code.jquery.com/jquery-1.11.0.min.js'}
    %script{src:'//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js'}
    %script{src:'../js/imagesloaded.pkgd.min.js'}
    %script{src:'../js/masonry.pkgd.min.js'}
  %body.container
    %a.fixed-floating-left{href: "../articles/#{config[previous_folder]['folder']}.html"}
      To #{config[previous_folder]['title']}
    %a.fixed-floating-right{href: "../articles/#{config[next_folder]['folder']}.html"}
      To #{config[next_folder]['title']}
    %article
      %section.article-header
        %h1= title
        - if defined?(author)
          .author-section
            .avatar
              %img{src: "../img/avatars/#{author.downcase.tr_s(' ','_')}.jpg"}
            .author-name
              %h4
                by
                %span#author-name= author
      %section.article-content
        =Haml::Engine.new(File.read(File.expand_path("../articles/content/_#{folder}_article.html.haml", __FILE__))).render
        - images = (Dir["img/#{folder}/*.jpg"] - ["img/#{folder}/opening.jpg"])
        - if images.size > 0 && !defined?(no_gallery)
          .image-grid.grid-section
            - images.each do |img|
              %img{src: "../#{img}"}
        %script{src:'../js/article.js'}
        %a{href: '../index.html'}
          Back to home



